{% extends "base.html" %}

{% block active %}
<li class="nav-item" role="none">
    <a class="nav-link active" href="/" role="menuitem">
        <i class="fa-solid fa-home nav-icon"></i>
        <span class="nav-text">Home</span>
    </a>
</li>
<li class="nav-item" role="none">
    <a class="nav-link" href="/workout" role="menuitem">
        <i class="fa-solid fa-dumbbell nav-icon"></i>
        <span class="nav-text">Workout</span>
    </a>
</li>
<li class="nav-item" role="none">
    <a class="nav-link" href="/new-workout" role="menuitem">
        <i class="fa-solid fa-plus nav-icon"></i>
        <span class="nav-text">New Workout</span>
    </a>
</li>
{% endblock %}

{# --- Workout Progress History UI INTEGRATION PLAN (for maintainers/designers) --- #}
{# 
  The following is a technical plan for adding a workout session history and progress tracking interface to the existing Flask/Jinja2 UI.

  1. EXISTING STRUCTURE:
    - Main templates:
      * base.html: Base layout with nav. 
      * home.html: "Home" - lists all workouts for current user; navigates to workout details or edit.
      * workout.html: Per-workout view (log/edit weights/details for today's session).
      * edit-workout.html, new-workout.html: For creating or editing workout and exercises.
    - Navigation: 
      * Navbar has direct links: Home, Workout, Logout.
      * Home has a button per workout, plus add/edit.

  2. API for session data:
    - Implemented at /api/workout/history (GET returns [sessions], POST logs a new session).

  3. HOW TO INTEGRATE "WORKOUT HISTORY" UI:
    * Add a new page/view: "Workout History" (e.g., at /history or /workout/history).
        - Accessible from navbar (add nav item: "History").
    * UI Components for the History Page:
      a) Summary of all past sessions by date, most recent first.
      b) Per session: Show workout name, timestamp, and all exercise logs (weights, reps, details, etc.).
      c) Optionally, add per-workout filter (dropdown) to filter history to a specific workout.
      d) (Advanced/future) Sparkline or chart components to visualize progress for each exercise.
    * General navigation flow:
      - User logs in and lands on Home.
      - New nav item "History" lets user access their session history.
      - From a session, optionally provide link back to that workout or allow session deletion (future).
      - If session data is empty, show a message indicating no workout history exists yet.

  4. RECOMMENDED IMPLEMENTATION:
    - New template: templates/history.html (extends base, uses container layout).
    - New view: Python handler at GET /history to render the page, fetches session data via backend API or DB query.
    - JS enhancement: Optionally use fetch XHR to allow live filtering/progress, but can be fully server-side Jinja.
    - Nav update: Edit base.html to add "History" item, ensure active state.
    - Styling: Re-use container, table/list, card components (see workout/exercise display).
    - Data Source: Use existing models.WorkoutSession and ExerciseLog; query sorted by timestamp.

  5. FILES TO UPDATE/CREATE:
    - templates/base.html (add nav)
    - templates/history.html (new!)
    - views.py (add history view handler)
    - Optionally static/js/history.js (for future interactive features)

  This plan provides a clear and practical path to surface workout history with minimal risk to existing UI.
#}

{% block body %}

{% if not user.workouts %}
    <!-- Modern Empty State with Hero Design -->
    <div class="hero-section">
        <div class="container">
            <div class="hero-content">
                <div class="hero-branding">
                    <div class="logo-container">
                        <img class="hero-logo" src="/static/images/logo-nobg.png" alt="Ares Workout Logo" />
                        <div class="logo-glow"></div>
                    </div>
                    <h1 class="hero-title">Ares Workout Tracker</h1>
                    <p class="hero-subtitle">Your fitness journey starts here</p>
                </div>
                
                <div class="hero-cta-section">
                    <h2 class="cta-heading">Create your first workout</h2>
                    <p class="cta-description">
                        Track your exercises, weights, and progress with our minimalist approach. 
                        Focus on what matters most - your performance.
                    </p>
                    <div class="cta-actions">
                        <a class="btn btn-primary btn-cta" href="/new-workout" role="button">
                            <i class="fa-solid fa-plus"></i>
                            Create Workout
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Decorative elements -->
        <div class="hero-decoration">
            <div class="decoration-circle circle-1"></div>
            <div class="decoration-circle circle-2"></div>
            <div class="decoration-circle circle-3"></div>
        </div>
    </div>

{% else %}

    <!-- Modern Dashboard Layout -->
    <div class="dashboard-container">
        
        <!-- Welcome Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="header-branding">
                    <img class="dashboard-logo" src="/static/images/logo-nobg.png" alt="Ares Logo" />
                    <div class="header-text">
                        <h1 class="dashboard-title">Welcome back</h1>
                        <p class="dashboard-subtitle">Ready to crush your next workout?</p>
                    </div>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ user.workouts|length }}</span>
                        <span class="stat-label">Workout{{ 's' if user.workouts|length != 1 else '' }}</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="dashboard-main">
            
            <!-- Quick Actions -->
            <section class="quick-actions">
                <h2 class="section-title">Quick Actions</h2>
                <div class="action-buttons">
                    <a class="btn btn-primary action-btn" href="/new-workout" role="button">
                        <i class="fa-solid fa-plus"></i>
                        <span>New Workout</span>
                    </a>
                    <a class="btn btn-secondary action-btn" href="/workout" role="button">
                        <i class="fa-solid fa-play"></i>
                        <span>Start Training</span>
                    </a>
                </div>
            </section>

            <!-- Workouts Grid -->
            <section class="workouts-section">
                <div class="section-header">
                    <h2 class="section-title">Your Workouts</h2>
                    <span class="workout-count">{{ user.workouts|length }} total</span>
                </div>
                
                <div class="workouts-grid">
                    {% for workout in user.workouts %}
                        <article class="workout-card" data-workout-id="{{ workout.id }}">
                            <div class="card-header">
                                <h3 class="workout-name">{{ workout.name }}</h3>
                                <div class="card-actions">
                                    <form action="/edit-workout" method="POST" class="inline-form">
                                        <button title="Edit Workout" type="submit" class="card-btn edit-btn" name="workout" value="{{ workout.id }}">
                                            <i class="fa-solid fa-pen"></i>
                                        </button>
                                    </form>
                                    <form action="{{ url_for('views.duplicate_workout', workout_id=workout.id) }}" method="GET" class="inline-form">
                                        <button title="Duplicate Workout" type="submit" class="card-btn duplicate-btn">
                                            <i class="fa-solid fa-copy"></i>
                                        </button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="card-content">
                                {% if workout.description %}
                                    <p class="workout-description">{{ workout.description }}</p>
                                {% endif %}
                                
                                <div class="workout-meta">
                                    {% if workout.category %}
                                        <span class="workout-category">
                                            <i class="fa-solid fa-tag"></i>
                                            {{ workout.category.name }}
                                        </span>
                                    {% endif %}
                                    <span class="exercise-count">
                                        <i class="fa-solid fa-dumbbell"></i>
                                        {{ workout.exercises|length }} exercise{{ 's' if workout.exercises|length != 1 else '' }}
                                    </span>
                                </div>
                            </div>
                            
                            <div class="card-footer">
                                <form action="/workout" method="POST" class="workout-form">
                                    <button type="submit" class="btn btn-primary workout-start-btn" name="workout" value="{{ workout.id }}">
                                        <i class="fa-solid fa-play"></i>
                                        Start Workout
                                    </button>
                                </form>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            </section>

        </main>
    </div>

{% endif %}

{% endblock %}

{# --- Workout Progress History UI INTEGRATION PLAN (for maintainers/designers) --- #}
{# 
  The following is a technical plan for adding a workout session history and progress tracking interface to the existing Flask/Jinja2 UI.

  1. EXISTING STRUCTURE:
    - Main templates:
      * base.html: Base layout with nav. 
      * home.html: "Home" - lists all workouts for current user; navigates to workout details or edit.
      * workout.html: Per-workout view (log/edit weights/details for today's session).
      * edit-workout.html, new-workout.html: For creating or editing workout and exercises.
    - Navigation: 
      * Navbar has direct links: Home, Workout, Logout.
      * Home has a button per workout, plus add/edit.

  2. API for session data:
    - Implemented at /api/workout/history (GET returns [sessions], POST logs a new session).

  3. HOW TO INTEGRATE "WORKOUT HISTORY" UI:
    * Add a new page/view: "Workout History" (e.g., at /history or /workout/history).
        - Accessible from navbar (add nav item: "History").
    * UI Components for the History Page:
      a) Summary of all past sessions by date, most recent first.
      b) Per session: Show workout name, timestamp, and all exercise logs (weights, reps, details, etc.).
      c) Optionally, add per-workout filter (dropdown) to filter history to a specific workout.
      d) (Advanced/future) Sparkline or chart components to visualize progress for each exercise.
    * General navigation flow:
      - User logs in and lands on Home.
      - New nav item "History" lets user access their session history.
      - From a session, optionally provide link back to that workout or allow session deletion (future).
      - If session data is empty, show a message indicating no workout history exists yet.

  4. RECOMMENDED IMPLEMENTATION:
    - New template: templates/history.html (extends base, uses container layout).
    - New view: Python handler at GET /history to render the page, fetches session data via backend API or DB query.
    - JS enhancement: Optionally use fetch XHR to allow live filtering/progress, but can be fully server-side Jinja.
    - Nav update: Edit base.html to add "History" item, ensure active state.
    - Styling: Re-use container, table/list, card components (see workout/exercise display).
    - Data Source: Use existing models.WorkoutSession and ExerciseLog; query sorted by timestamp.

  5. FILES TO UPDATE/CREATE:
    - templates/base.html (add nav)
    - templates/history.html (new!)
    - views.py (add history view handler)
    - Optionally static/js/history.js (for future interactive features)

  This plan provides a clear and practical path to surface workout history with minimal risk to existing UI.
#}
